%MDI



G10555 A30 Q7500 V10000

G4F1

G10555 A30 Q7000 V10000 W1

G4F1
M0
M0

M0
  ;Abilita gear mandrini
  G601 C0 M101
  
  .LOOP
  G4F1
  VG100=0.0     ;Velocità (=0 G0) (>0 G1)
  VG101=0.0     ;Posizione C
  RPT .STR_POS_C, .END_POS_C, 1

  G4F1
  
  VG100=0.0     ;Velocità (=0 G0) (>0 G1)
  VG101=360.0   ;Posizione C
  RPT .STR_POS_C, .END_POS_C, 1
  
  JMP .LOOP
  
  
  
;Posizione C
;--------------------------------------
.STR_POS_C
  SYN
  G61

  ; Sgancio assi
  G4005 S(AXIDX(3,C))
  G4099

  ; Aggancia assi ai virtuali
  G153
  G4010 M(AXIDX(C)) S(AXIDX(3,C)) I1
  G4099
  G152

  ;Calcella origini
  G178 U0 

  SYN
  G153
  ;Movimento C
  IF (VG100>0) THEN
    G153 G1 F(VG100) C(VG101)
  ELSE
    G153 G0 C(VG101)  
  ENDIF
  G152
  
  SYN    
  ; Sgancio assi
  G4005 S(AXIDX(3,C))
  G4099

  G64
  SYN
.END_POS_C
  
M2
M30